#!/bin/sh

#sh SetupProgram to run in Desktop directory

#this downloads any available updates to make sure we have the most current version
sudo apt update
sudo apt upgrade -y
sudo apt install python3-pip

#installs python, apache, and flask
sudo apt install python3
sudo apt install apache2 -y
sudo apt install time
sudo pip3 install flask
sudo apt-get install python3-pandas -y
sudo pip3 install openpyxl==2.6.4
sudo apt-get install python3.6-dev libmysqlclient-dev
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db
curl -LsS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | sudo bash
sudo apt-get install -y apt-transport-https
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo apt-get install libmariadb3
sudo apt-get install libmariadb-dev
sudo pip3 install mariadb

#installs a fork of MySQL, called maria data base and a python accessible api
sudo apt install mariadb-server -y
sudo apt install mariadb -y
sudo apt install mysql-client-core-5.7

#installs the excel sheet for the dividend stocks
wget https://bit.ly/USDividendChampions1
mv USDividendChampions1 USDividendChampions.xlsx
mv ServerSetup ServerSetup.sql

#makes the preparations for and deploys app.py
cd /home/ubuntu/RaspberryPiScripts/Website
mkdir webapp
cd webapp
mkdir templates
cd /home/ubuntu/RaspberryPiScripts/Website
mv /home/ubuntu/RaspberryPiScripts/Website/app.py /home/ubuntu/RaspberryPiScripts/Website/webapp
mv /home/ubuntu/RaspberryPiScripts/Website/index.html /home/ubuntu/RaspberryPiScripts/Website/webapp/templates
mv /home/ubuntu/RaspberryPiScripts/Website/stockgraph.html /home/ubuntu/RaspberryPiScripts/Website/webapp/templates/
python3 app.py
cd /home/ubuntu/RaspberryPiScripts
